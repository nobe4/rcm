{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/components/Help.vue?80eb","webpack:///./src/views/Rcm.vue?37e3","webpack:///./src/App.vue?017e","webpack:///./src/App.vue","webpack:///./src/App.vue?97f5","webpack:///./src/views/Rcm.vue","webpack:///./src/lib/synth.js","webpack:///./src/lib/looper.js","webpack:///./src/lib/midi.js","webpack:///./src/lib/time.js","webpack:///./src/lib/chord.js","webpack:///./src/components/Help.vue","webpack:///./src/components/Help.vue?2310","webpack:///./src/components/Chord.vue","webpack:///./src/lib/guitar.js","webpack:///./src/lib/theory.js","webpack:///./src/components/Chord.vue?986b","webpack:///./src/views/Rcm.vue?5365","webpack:///./src/views/Interval.vue","webpack:///./src/components/Toggle-answer.vue","webpack:///./src/components/Toggle-answer.vue?9130","webpack:///./src/components/Item-selector.vue","webpack:///./src/components/Item-selector.vue?79c9","webpack:///./src/views/Interval.vue?7694","webpack:///./src/views/Scale.vue","webpack:///./src/views/Scale.vue?e1e6","webpack:///./src/views/Chord.vue","webpack:///./src/components/Guitar-position.vue","webpack:///./src/components/Guitar-position.vue?72a6","webpack:///./src/views/Chord.vue?8400","webpack:///./src/router/index.js","webpack:///./src/main.js","webpack:///./src/components/Guitar-position.vue?e23d","webpack:///./src/components/Chord.vue?1fbf","webpack:///./src/views/Interval.vue?f809","webpack:///./src/views/Chord.vue?986d","webpack:///./src/components/Item-selector.vue?cccb"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","id","routes","route","path","to","this","$router","options","__exports__","render","class","looper","chords","chord","detailed","showNotes","currentChord","playPause","playing","tick","reload","currentRythmMethods","rhythm","currentModulationName","modulation","tempo","type","min","max","step","loopDuration","volume","duration","AudioUnit","audioCtx","AudioContext","webkitAudioContext","master","createGain","connect","destination","currentTime","start","gain","setValueAtTime","time","Synth","compressor","createDynamicsCompressor","threshold","knee","ratio","attack","pitch","play","end","oscillator","createOscillator","frequency","a","adsrRamp","linearRampToValueAtTime","stop","Tick","Looper","synth","callback","lookAhead","timeoutTime","intervalLoop","nextChordTime","nextTickTime","activeTick","parseInt","setVolume","setInterval","loop","clearInterval","pause","setTimeout","mtf","midi","Math","pow","mtnn","note","height","floor","ratioToString","durationLetters","string","x","RhythmBox","durations","ceil","difference","noise","divisionBaseSize","random","maxDivisions","divisionCount","divisionSize","Array","from","b","divisions","randomIndex","divisibleValue","chordModulations","maj","dim","aug","5","7","maj7","min7","minmaj7","dim7","hdim7","dom7","aug7","modulationLists","root","simple","augmtd","full","randomChords","modulationListName","map","Chord","modulationToNoteNames","chordConstruction","semitoneCount","pitches","importChord","durationString","endTime","undefined","modulationList","visible","props","split","notes","join","GuitarShapes","major","minor","augmented","diminished","shapeToObject","position","strings","tail","forEach","muted","open","indexOf","bar","Note","octave","accidental","index","isFinite","String","natural","names","validate","nameToIndex","indexToName","count","accidentals","includeOctave","replaceAll","replace","includes","candidates","Error","filter","basicNames","allNames","isValid","concat","Interval","setData","diff","interval","Number","noteIndex","allowed","tones","ret","keys","intervals","Scale","noteList","rootIndex","previousNote","naturals","newNoteIndex","newNote","expectedNatural","newName","ionian","dorian","phrygian","pentatonic","computed","fromMidi","toString","components","Help","modulationListNames","rhythmMethods","toUpperCase","created","methods","exercises","currentExercise","exercise","rootLocked","items","intervalList","selectedIntervals","$parent","answerShown","selectedItemsValue","selectedItems","item","for","emits","sort","reduce","set","selection","reverse","watch","$emit","ToggleAnswer","ItemSelector","play1second","scale","scaleList","selectedScales","findScale","colspan","toGuitarPosition","_","data-p","data-nut","data-open","data-muted","data-on","data-bar","data-position","current","GuitarPosition","allMod","separate","component","Rcm","router","createRouter","history","createWebHashHistory","createApp","App","use","mount"],"mappings":"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","file":"js/app.97cc6b59.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Help.vue?vue&type=style&index=0&id=44096c40&lang=stylus&scoped=true\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Rcm.vue?vue&type=style&index=0&id=858cb7ba&lang=stylus\"","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./App.vue?vue&type=style&index=0&id=323031f7&lang=stylus\"","<template>\n\t<div id=\"nav\">\n\t\t<router-link v-for=\"route in routes\" :key=\"route.path\" :to=\"route.path\">\n\t\t\t{{ route.name }}\n\t\t</router-link>\n\t</div>\n\t<router-view />\n</template>\n\n<style lang=\"stylus\">\n\tbody\n\t\tbox-sizing border-box\n\t\tfont-family roboto, sans-serif\n\t\ttext-align center\n\t\tpadding 0.5em\n\t\tmargin 0\n\t\tfont-weight 100\n\n\t\t#nav\n\t\t\ttext-align left\n\n\t\t\ta\n\t\t\t\tmargin-right 1em\n\n\t\th1\n\t\t\tfont-size 3em\n\t\t\tfont-weight 100\n\t\t\ttext-transform uppercase\n\n\t\t#menu\n\t\t\tfont-size: 3em\n\t\t\tlist-style-type: none\n\t\t\ta\n\t\t\t\tcolor: black\n</style>\n\n<script>\n\texport default {\n\t\tname: 'Navigation',\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\troutes: this.$router.options.routes,\n\t\t\t}\n\t\t},\n\t}\n</script>\n","import { render } from \"./App.vue?vue&type=template&id=323031f7\"\nimport script from \"./App.vue?vue&type=script&lang=js\"\nexport * from \"./App.vue?vue&type=script&lang=js\"\n\nimport \"./App.vue?vue&type=style&index=0&id=323031f7&lang=stylus\"\n\nimport exportComponent from \"/home/runner/work/rcm/rcm/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<div id=\"rcm\">\n\t\t<h1>Random Chord Machine</h1>\n\t\t<div id=\"chords\">\n\t\t\t<chord\n\t\t\t\tv-for=\"(chord, i) in looper.chords\"\n\t\t\t\t:value=\"chord\"\n\t\t\t\t:detailed=\"showNotes\"\n\t\t\t\tclass=\"chord\"\n\t\t\t\t:class=\"{ active: i == currentChord }\"\n\t\t\t\t:key=\"chord\"\n\t\t\t/>\n\t\t</div>\n\t\t<div class=\"controls\">\n\t\t\t<div class=\"line\">\n\t\t\t\t<button id=\"playPause\" @click=\"looper.playPause()\">\n\t\t\t\t\t{{ looper.playing ? 'Pause' : 'Play' }}\n\t\t\t\t</button>\n\t\t\t\t<button id=\"metronome\" @click=\"looper.tick = !looper.tick\">Metro</button>\n\t\t\t\t<button id=\"reload\" @click=\"reload()\">Reload</button>\n\t\t\t</div>\n\t\t\t<div class=\"line\">\n\t\t\t\t<button id=\"notes\" @click=\"this.showNotes = !this.showNotes\">Notes</button>\n\t\t\t\t<button id=\"random\" @click=\"currentRythmMethods++\">\n\t\t\t\t\t{{ rhythm }}\n\t\t\t\t</button>\n\t\t\t\t<button id=\"modulation\" @click=\"currentModulationName++\">\n\t\t\t\t\t{{ modulation }}\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t\t<div class=\"line\">\n\t\t\t\t<input v-model=\"looper.tempo\" type=\"number\" min=\"30\" max=\"300\" step=\"1\" />\n\t\t\t\t<input v-model=\"loopDuration\" type=\"number\" min=\"16\" max=\"128\" step=\"1\" />\n\t\t\t\t<input v-model=\"looper.volume\" type=\"number\" min=\"0\" max=\"40\" step=\"1\" />\n\t\t\t</div>\n\t\t</div>\n\t\t<help\n\t\t\t:volume=\"looper.volume\"\n\t\t\t:tempo=\"looper.tempo\"\n\t\t\t:duration=\"loopDuration\"\n\t\t\t:rhythm=\"rhythm\"\n\t\t\t:modulation=\"modulation\"\n\t\t/>\n\t</div>\n</template>\n\n<style lang=\"stylus\">\n\t\tfont-size = 3em\n\n\t\t#chords\n\t\t\tpadding 0\n\t\t\ttext-align center\n\n\t\t\t.chord\n\t\t\t\tvertical-align top\n\t\t\t\tlist-style-type none\n\t\t\t\tdisplay inline-block\n\t\t\t\tmargin 1em 2em\n\t\t\t\ttext-align center\n\n\t\t\t\t&.active\n\t\t\t\t\tborder-bottom 3px solid black\n\n\t\t\t\t> *\n\t\t\t\t\tfont-size font-size\n\t\t\t\t\t&.rhythm\n\t\t\t\t\t\tfont-size (font-size / 2)\n\n\t\t\t\t.name\n\t\t\t\t\ttext-transform uppercase\n\n\t\t\t\t.modulation\n\t\t\t\t\ttext-transform lowercase\n\n\t\t\t\t.rhythm\n\t\t\t\t\tdisplay block\n\n\t.controls\n\t\tdisplay: flex\n\t\tflex-flow: column\n\t\talign-items: center\n\t\tjustify-content: center\n\n\t\t.line\n\t\t\tdisplay: flex\n\t\t\tflex-flow: row wrap\n\t\t\talign-items: center\n\t\t\tjustify-content: center\n\t\t\ttext-align: center\n\n\tbutton, input\n\t\tbox-sizing: border-box\n\t\ttext-align: center\n\t\twidth: 7em\n\t\tfont-size: (font-size / 2)\n\t\tmargin: 0.5em\n\t\tbackground: white\n\t\tpadding: 0.3em\n\t\tborder: black 2px solid\n\t\ttext-transform: capitalize\n\n\t\t&.on, &:active\n\t\t\tbackground: black\n\t\t\tcolor: white\n</style>\n\n<script>\n\timport { Synth, Tick } from '@/lib/synth.js'\n\timport Looper from '@/lib/looper.js'\n\timport { randomChords } from '@/lib/chord.js'\n\timport { RhythmBox } from '@/lib/time.js'\n\timport Help from '@/components/Help.vue'\n\timport Chord from '@/components/Chord.vue'\n\n\texport default {\n\t\tname: 'Rcm',\n\n\t\tcomponents: { Help, Chord },\n\n\t\tdata: function () {\n\t\t\tlet data = {\n\t\t\t\t// Global variables to use the interface.\n\t\t\t\tsynth: new Synth(),\n\t\t\t\ttick: new Tick(),\n\n\t\t\t\tloopDuration: 32,\n\t\t\t\tshowNotes: false,\n\t\t\t\tcurrentChord: 0,\n\n\t\t\t\t// Lists and default values.\n\t\t\t\tmodulationListNames: ['root', 'simple', 'augmtd', '7 smpl', 'full'],\n\t\t\t\tcurrentModulationName: 1,\n\t\t\t\trhythmMethods: ['equal', 'random', 'binary'],\n\t\t\t\tcurrentRythmMethods: 0,\n\t\t\t}\n\t\t\tdata.looper = new Looper(data.synth, data.tick, [], 120, 32, (c) => {\n\t\t\t\tthis.currentChord = c\n\t\t\t})\n\n\t\t\treturn data\n\t\t},\n\n\t\tcomputed: {\n\t\t\trhythm() {\n\t\t\t\tconst r = this.rhythmMethods[this.currentRythmMethods % this.rhythmMethods.length]\n\t\t\t\treturn r[0].toUpperCase() + r.slice(1)\n\t\t\t},\n\t\t\tmodulation() {\n\t\t\t\tconst m = this.modulationListNames[\n\t\t\t\t\tthis.currentModulationName % this.modulationListNames.length\n\t\t\t\t]\n\t\t\t\treturn m[0].toUpperCase() + m.slice(1)\n\t\t\t},\n\t\t},\n\n\t\tcreated() {\n\t\t\tthis.reload()\n\t\t},\n\n\t\tmethods: {\n\t\t\treload() {\n\t\t\t\tconst r = new RhythmBox(\n\t\t\t\t\tthis.loopDuration,\n\t\t\t\t\tthis.rhythmMethods[this.currentRythmMethods % this.rhythmMethods.length]\n\t\t\t\t)\n\n\t\t\t\tthis.looper.chords = randomChords(\n\t\t\t\t\tr.durations,\n\t\t\t\t\tthis.modulationListNames[\n\t\t\t\t\t\tthis.currentModulationName % this.modulationListNames.length\n\t\t\t\t\t]\n\t\t\t\t)\n\n\t\t\t\tthis.looper.currentChord = 0\n\t\t\t},\n\t\t},\n\t}\n</script>\n","/* Generic class for audio components with a controlled gain.\n */\nclass AudioUnit {\n\tconstructor() {\n\t\tthis.volume = 1\n\n\t\t// Setup the audio context and link the nodes together.\n\t\tthis.audioCtx = new (window.AudioContext || window.webkitAudioContext)()\n\t\tthis.master = this.audioCtx.createGain()\n\t\tthis.master.connect(this.audioCtx.destination)\n\t}\n\n\ttime() {\n\t\treturn this.audioCtx.currentTime\n\t}\n\n\t/* setVolume: Change the current volume. Act by tweaking the gain's gain.\n\t * params:\n\t *     volume: The new volume to use.\n\t */\n\tsetVolume(volume) {\n\t\tthis.volume = volume\n\t\tthis.start()\n\t}\n\n\t/* start and stop: While the audio unit can be called/stopped in the futur,\n\t * we want to change their volume now. Those functions perform just that.\n\t */\n\tstart() {\n\t\tthis.master.gain.setValueAtTime(this.volume, this.time())\n\t}\n\tstop() {\n\t\tthis.master.gain.setValueAtTime(0, this.time())\n\t}\n}\n\n/* Synth class to play chords. Add a compressor and a ADSR ramp for a cleaner\n * sound.\n */\nclass Synth extends AudioUnit {\n\tconstructor() {\n\t\tsuper()\n\n\t\t// Create the compressor.\n\t\tthis.compressor = this.audioCtx.createDynamicsCompressor()\n\t\tthis.compressor.threshold.value = -10\n\t\tthis.compressor.knee.value = 40\n\t\tthis.compressor.ratio.value = 10\n\t\tthis.compressor.attack.value = 0\n\t\tthis.compressor.connect(this.master)\n\t}\n\n\t/* play1second: Play the pitch for 1 second\n\t * params:\n\t *     pitch: The frequency to play.\n\t */\n\tplay1second(pitch) {\n\t\tthis.play(pitch, this.time(), this.time() + 1)\n\t}\n\n\t/* play: Play the sound.\n\t * params:\n\t *     pitch: The frequency to play.\n\t *     start: Time at which to start playing the sound.\n\t *     end:   Time at which to stop playing the sound.\n\t */\n\tplay(pitch, start, end) {\n\t\t// -1 is a silence\n\t\tif (pitch === -1) {\n\t\t\treturn\n\t\t}\n\n\t\t// Create an oscillator, using a triangle wave.\n\t\tvar oscillator = this.audioCtx.createOscillator()\n\t\toscillator.type = 'triangle'\n\t\toscillator.frequency.setValueAtTime(pitch, this.time())\n\n\t\t// Create a simple adsr ramp\n\t\tvar a = 0.1\n\t\tvar d = 0.2\n\t\tvar s = 0.8\n\t\tvar r = 0.8\n\n\t\tvar adsrRamp = this.audioCtx.createGain()\n\t\tadsrRamp.gain.setValueAtTime(0, start - 0.1)\n\t\tadsrRamp.gain.linearRampToValueAtTime(1, start + a)\n\t\tadsrRamp.gain.linearRampToValueAtTime(s, start + a + d)\n\t\tadsrRamp.gain.linearRampToValueAtTime(0, end + r)\n\n\t\t// Connect everything\n\t\toscillator.connect(adsrRamp)\n\t\tadsrRamp.connect(this.compressor)\n\n\t\t// Set the timing for playing the note.\n\t\toscillator.start(start)\n\t\toscillator.stop(end + r)\n\t}\n}\n\n/* Simple AudioUnit used to play an 880 sinewave.\n */\nclass Tick extends AudioUnit {\n\t/* play: Play the sound.\n\t * params:\n\t *     time: Time at which to play the sound.\n\t */\n\tplay(time) {\n\t\tvar oscillator = this.audioCtx.createOscillator()\n\t\toscillator.type = 'sine'\n\t\toscillator.frequency.setValueAtTime(880, this.time())\n\t\toscillator.connect(this.master)\n\n\t\t// Very short 'tick'\n\t\toscillator.start(time)\n\t\toscillator.stop(time + 0.1)\n\t}\n}\n\nexport { Tick, Synth }\n","/* Play a suite of chords/chords in a loop and allow a simple play/pause/tempo\n * change mechanism. Mainly based on\n * https://www.html5rocks.com/en/tutorials/audio/scheduling/.\n */\nclass Looper {\n\t/* Create a new looper, following a set of chords at a defined tempo.\n\t * params:\n\t *     synth: The synth to play the chords on.\n\t *     synth: The synth to tick the metronome on.\n\t *     chords: The list of chords to play.\n\t *     tempo: The BPM to play the chords.\n\t *     callback: A function to call everytime the current chord change.\n\t */\n\tconstructor(synth, tick, chords, tempo, volume, callback) {\n\t\tthis.chords = chords\n\t\tthis.tempo = tempo\n\t\tthis.synth = synth\n\t\tthis.tick = tick\n\t\tthis.volume = volume\n\n\t\tthis.playing = false\n\n\t\t// How much in advance should we look for chords.\n\t\tthis.lookAhead = 0.3\n\t\t// How quickly should the interval call the loop function.\n\t\tthis.timeoutTime = 25\n\t\t// The interval element, to be cleared.\n\t\tthis.intervalLoop = null\n\n\t\t// Where we are in the chord list.\n\t\tthis.currentChord = 0\n\t\t// What is the next audio context time to play a chord at.\n\t\tthis.nextChordTime = 0\n\t\t// Same for the metronome\n\t\tthis.nextTickTime = 0\n\t\tthis.activeTick = false\n\n\t\tthis.callback = callback\n\t}\n\n\tset volume(volume) {\n\t\tvolume /= 100\n\t\tthis.synth.setVolume(volume)\n\t\tthis.tick.setVolume(volume)\n\t}\n\n\tget volume() {\n\t\treturn parseInt(this.synth.volume * 100)\n\t}\n\n\t/* play: Play the loop.  */\n\tplay() {\n\t\t//  Playing means we start again from the first chord.\n\t\tthis.currentChord = 0\n\n\t\t// We also start playing right away.\n\t\tthis.nextChordTime = this.synth.time()\n\t\tthis.synth.start()\n\n\t\tthis.nextTickTime = this.tick.time()\n\t\tthis.tick.start()\n\n\t\t// And we call the loop function every so often.\n\t\tthis.intervalLoop = setInterval(() => this.loop(), this.timeoutTime)\n\t}\n\n\t/* pause: Pause the loop.  */\n\tpause() {\n\t\t// Pausing clear the interval loop.\n\t\tthis.synth.stop()\n\t\tthis.tick.stop()\n\t\tclearInterval(this.intervalLoop)\n\t}\n\n\t/* playPause: Toggle the loop playing.  */\n\tplayPause() {\n\t\tthis.playing = !this.playing\n\n\t\tif (this.playing) {\n\t\t\tthis.play()\n\t\t} else {\n\t\t\tthis.pause()\n\t\t}\n\t}\n\n\t/* The loop will request to play every chord found in the defined lookAhead.  */\n\tloop() {\n\t\t// If there are 2 quarter chords fitting inside the 30ms of look ahead, schedule them.\n\t\twhile (this.nextChordTime < this.synth.time() + this.lookAhead) {\n\t\t\t// Play the current chord.\n\t\t\tthis.chords[this.currentChord].play(this.synth, this.tempo, this.nextChordTime)\n\n\t\t\t// Update the new time to play the next chord.\n\t\t\tthis.nextChordTime += (this.chords[this.currentChord].duration * 15.0) / this.tempo\n\n\t\t\t// Send the current index to the outside world.\n\t\t\tconst currentChord = this.currentChord\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.callback(currentChord)\n\t\t\t}, 0)\n\n\t\t\t// Update the current chord.\n\t\t\tthis.currentChord = ++this.currentChord % this.chords.length\n\t\t}\n\n\t\t// Same logic for ticking\n\t\twhile (this.nextTickTime < this.tick.time() + this.lookAhead) {\n\t\t\tif (this.activeTick) {\n\t\t\t\tthis.tick.play(this.nextTickTime)\n\t\t\t}\n\t\t\t// Update the new time to play the next chord.\n\t\t\tthis.nextTickTime += 60.0 / this.tempo\n\t\t}\n\t}\n}\n\nexport default Looper\n","/* mtf (midi to frequency): Compute the number-based hertz frequency for the\n * note. So we can pass this value directly later.\n * The name is formed of the root note and its height.\n * The reference tunning is A4 = 440Hz.\n * params:\n *     midi: The midi integer\n * returns: The note frequency\n */\nfunction mtf(midi) {\n\t// Using http://www.glassarmonica.com/science/frequency_midi.php\n\t// f = 27.5 * 2 ^ ((midi - 21)/12)\n\t// Midi notes are from 21 (A0, 27.5Hz) to 108 (C8, 4186Hz)\n\treturn 27.5 * Math.pow(2, (midi - 21.0) / 12.0)\n}\n\n/* mtnn (midi to note name): Compute the note at a defined distance from the root.\n * params:\n *     midi: The midi note to get the name from.\n * returns: An array containing: the note letter, the possible modulation, the note height\n */\nfunction mtnn(midi) {\n\t// -1 is a silence\n\tif (midi === -1) return ['s', '', '']\n\n\t// List all possible note to simplify the computation to a single modulo.\n\tconst note = ['a', 'a#', 'b', 'c', 'c#', 'd', 'd#', 'e', 'f', 'f#', 'g', 'g#'][(midi - 21) % 12]\n\n\t// Use the same method but move the change to the note between b and c\n\tconst height = Math.floor((midi - 12) / 12)\n\n\treturn [note[0], note[1] || '', height]\n}\n\nexport { mtf, mtnn }\n","/* stringToRatio: Compute a number-based time duration for the note.\n * The logic is to use this value as a ratio when selecting the tempo.\n * For example, a half-note has a duration of 2, because we can then do\n * tempo/2 to have the duration of the note.\n * We can also combine durations like:\n *  - ww  => 1 + 1\n *  - hqe => 1/2 + 1/4 + 1/8\n * params:\n *     durationString: The defined duration, in a string format.\n * returns: The float ratio to apply on the tempo later.\n */\nfunction stringToRatio(durationString) {\n\tconst durationRatioReference = ['w', 'h', 'q', 'e', 's']\n\n\tconst durationValues = durationString.split('')\n\tlet ratio = 0\n\n\tdurationValues.forEach((durationChar) => {\n\t\tratio += 1 / (1 << durationRatioReference.indexOf(durationChar))\n\t})\n\n\t// Catch the invalid names\n\tif (ratio < 0) throw `Invalid duration name: '${durationString}'.`\n\n\treturn ratio\n}\n\n/* ratioToString: Create the string equivalent to the duration.\n * e.g. 16: 4, 4, 4, 4 -> q, q, q, q\n * params:\n *     duration: The duration to get th string from.\n * returns: An array of strings\n */\nfunction ratioToString(duration) {\n\tconst durationLetters = ['s', 'e', 'q', 'h', 'w']\n\tlet string = ''\n\n\t// x is at the same time the index in the duration letters reference and\n\t// the 2 power to apply when substracting the duration.\n\tlet x = 4\n\n\t// While the duration is not entirely looked.\n\twhile (duration > 0 && x > -1) {\n\t\t// If the current 2th power is contained in the duration\n\t\tif (duration - (1 << x) >= 0) {\n\t\t\t// Substract it\n\t\t\tduration -= 1 << x\n\t\t\t// And add the corresponding letter\n\t\t\tstring += durationLetters[x]\n\t\t} else {\n\t\t\t// Otherwise, go to the next letter\n\t\t\tx--\n\t\t}\n\t}\n\treturn string\n}\n\n/* RythmBox: Beat maker, create a list of chord length, fitting in a defined length.\n */\nclass RhythmBox {\n\t/* params:\n\t *     duration: The duration of the mesure, in number of sixteenth chords\n\t *     (e.g.  16 is a full bar, 32 is two bars).\n\t *     mode: The mode of generation, simple is the default.\n\t */\n\tconstructor(duration = 16, mode = 'simple') {\n\t\tthis.duration = duration\n\t\tthis.durations = this[mode + 'Generator']()\n\t}\n\n\t/* equalGenerator: Create the default duration for the defined duration, simply cut the bar in\n\t * 4 equal parts, and trim on the last durations to fill the gap.\n\t * e.g. 16 -> 4, 4, 4, 4\n\t *       6 -> 2, 2, 1, 1\n\t * returns: An array of durations.\n\t */\n\tequalGenerator() {\n\t\t// Round the duration to its next integer\n\t\tconst duration = Math.ceil(this.duration / 4.0)\n\t\tconst durations = [duration, duration, duration, duration]\n\t\t// Compute the difference between the computed duration and the expected\n\t\t// one.\n\t\tconst difference = duration * 4 - this.duration\n\n\t\t// Reduce the tail of the array's value.\n\t\tfor (var x = difference; x > 0; x--) {\n\t\t\tdurations[4 - x]--\n\t\t}\n\n\t\treturn durations\n\t}\n\n\t/* randomGenerator: Create a fully random rhythm progression.\n\t * params:\n\t *     noise: How much to scramble the durations.\n\t * returns: An array of durations.\n\t */\n\trandomGenerator(noise = 20) {\n\t\t// The minimal size of a division, this will vary how many divisions there are.\n\t\tconst divisionBaseSize = Math.ceil(this.duration / (Math.random() * this.duration))\n\n\t\t// Max number of divisions\n\t\tconst maxDivisions = Math.floor(this.duration / divisionBaseSize)\n\n\t\t// How many divisions we want.\n\t\tconst divisionCount = Math.floor(Math.random() * maxDivisions) + 1\n\n\t\t// Actual division size\n\t\tconst divisionSize = Math.ceil(this.duration / divisionCount)\n\n\t\t// Array of durations\n\t\tconst durations = Array.from({ length: divisionCount }, () => divisionSize)\n\n\t\t// How much time is added in the computation.\n\t\tconst difference = divisionCount * divisionSize - this.duration\n\n\t\t// Remove extra time\n\t\tfor (var x = difference; x > 0; x--) {\n\t\t\tdurations[divisionCount - x]--\n\t\t}\n\n\t\t// Sramble the rhythm\n\t\t// Move 1 around\n\t\tif (divisionCount > 1) {\n\t\t\tfor (let x = Math.random() * noise; x-- > 0; ) {\n\t\t\t\tconst a = Math.floor(Math.random() * divisionCount)\n\t\t\t\tconst b = Math.floor(Math.random() * divisionCount)\n\n\t\t\t\t// Don't move if there's no time left, or if it's not doing anything.\n\t\t\t\tif (a == b || durations[a] <= 1) {\n\t\t\t\t\tx++\n\t\t\t\t} else {\n\t\t\t\t\tdurations[a]--\n\t\t\t\t\tdurations[b]++\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn durations\n\t}\n\n\t/* binaryGenerator: Create a rhytm progression by dividing in two a number of\n\t * time the initial duration.\n\t * returns: An array of durations.\n\t */\n\tbinaryGenerator() {\n\t\t// Array to split\n\t\tconst durations = [this.duration]\n\n\t\t// How many time do we want to divide? At least two, but not too much, and\n\t\t// depending on the current duration.\n\t\tconst divisions = 2 + Math.floor(Math.random() * (this.duration / 4))\n\n\t\tfor (let x = divisions; x-- > 0; ) {\n\t\t\tconst randomIndex = Math.floor(Math.random() * durations.length)\n\n\t\t\tconst divisibleValue = durations[randomIndex]\n\n\t\t\t// Do not try to divide below a sixteenth note\n\t\t\tif (divisibleValue <= 1) {\n\t\t\t\tx++\n\t\t\t\tcontinue\n\t\t\t}\n\n\t\t\t// Update the current value and add the other half right after. It's\n\t\t\t// effectively splitting the current time in half.\n\t\t\tdurations[randomIndex] = Math.floor(divisibleValue / 2)\n\t\t\tdurations.splice(randomIndex, 0, Math.ceil(divisibleValue / 2))\n\t\t}\n\n\t\treturn durations\n\t}\n}\n\nexport { RhythmBox, stringToRatio, ratioToString }\n","import { mtnn, mtf } from '@/lib/midi.js'\nimport { ratioToString } from '@/lib/time.js'\n\n/* All the available modulations defined for a chord.\n * The integers are distances from the root note, e.g. a Major Triade is 0, 4, 7\n */\nconst chordModulations = {\n\t'': [0], // only the root note\n\tmaj: [0, 4, 7],\n\tmin: [0, 3, 7],\n\tdim: [0, 3, 6],\n\taug: [0, 4, 8],\n\t5: [0, 5],\n\t7: [0, 4, 7, 10],\n\tmaj7: [0, 4, 7, 11],\n\tmin7: [0, 3, 7, 10],\n\tminmaj7: [0, 3, 7, 11],\n\tdim7: [0, 3, 6, 9],\n\thdim7: [0, 3, 6, 10],\n\tdom7: [0, 4, 7, 10],\n\taug7: [0, 4, 8, 11],\n}\n\n/* Different list of modulations available to the user, from the simplest, to\n * the most complete.\n */\nconst modulationLists = {\n\troot: [''],\n\tsimple: ['', 'maj', 'min'],\n\taugmtd: ['', 'maj', 'min', 'dim', 'aug', '5'],\n\t'7 smpl': ['', 'maj', 'min', 'dim', 'aug', '5', '7', 'maj7', 'min7', 'minmaj7'],\n\tfull: [\n\t\t'',\n\t\t'maj',\n\t\t'min',\n\t\t'dim',\n\t\t'aug',\n\t\t'5',\n\t\t'7',\n\t\t'maj7',\n\t\t'min7',\n\t\t'minmaj7',\n\t\t'dim7',\n\t\t'hdim7',\n\t\t'dom7',\n\t\t'aug7',\n\t],\n}\n\n/* randomChords: Generate a random chord sequence to fit the\n * defined duration.\n * params:\n *     durations: An array of durations to fit the chords in.\n *     modulationListName: The modulation list name to use.\n * returns: An array of chords.\n */\nfunction randomChords(durations, modulationListName = 'simple') {\n\treturn durations.map((duration) => Chord.random(duration, modulationListName))\n}\n\n/* modulationToNoteNames: Return all the notes making the defined chord.\n * params:\n *     root: The chord root note.\n *     modulation: The chord modulation.\n * returns: An array of notes.\n */\nfunction modulationToNoteNames(root, modulation) {\n\t// For silence, return nothing\n\tif (root === -1) {\n\t\treturn []\n\t}\n\n\t// Ensure the modulation exist.\n\tif (!Object.prototype.hasOwnProperty.call(chordModulations, modulation))\n\t\tthrow `Invalid chord name: '${modulation}'.`\n\n\t// Get the modulation's construction and map each semitone to a new note.\n\tvar chordConstruction = chordModulations[modulation]\n\n\treturn chordConstruction.map((semitoneCount) => {\n\t\treturn mtnn(root + semitoneCount)\n\t})\n}\n\n/* chordsToHTML: Convert a list of chords to their HTML representation.\n * params:\n *     chords: The list of chords.\n * returns: The HTML string representing the chords.\n */\nfunction chordsToHTML(chords) {\n\treturn chords\n\t\t.map((chord) => {\n\t\t\tconst note = mtnn(chord.root)\n\t\t\treturn `<li class=\"chord\">\n      <span class=\"rhythm\">\n\t${chord.durationString\n\t\t.split('')\n\t\t.map((a) => `<i class='${a}'></i>`)\n\t\t.join('')}\n      </span>\n      <span class=\"note\">\n\t<span class=\"name\">${note[0]}</span>\n\t<span class=\"accidental\">${note[1]}</span>\n      </span>\n      <span class=\"modulation\">\n\t${chord.modulation}\n      </span>\n      <ul class=\"details\">\n      ${modulationToNoteNames(chord.root, chord.modulation)\n\t\t\t.map((note) => {\n\t\t\t\treturn `<li>${note.join('')}</li>`\n\t\t\t})\n\t\t\t.join('')}\n      </ul>\n      </li>`\n\t\t})\n\t\t.join('')\n}\n\n/* Multiple defined pitch playing for a defined period of time.\n */\nclass Chord {\n\t/* Create a new chord.\n\t * arguments:\n\t *   root: Root note to base the chord on\n\t *   modulation: Modulation of the chord (maj, min, ...)\n\t *   duration: A number based ratio of the chord duration. (2 is half note, 4\n\t *             a quarter, ...)\n\t */\n\tconstructor(root, modulation = '', duration = 2) {\n\t\tthis.pitches = this.importChord(root, modulation)\n\n\t\tthis.duration = duration\n\n\t\t// Used for display\n\t\tthis.root = root\n\t\tthis.modulation = modulation\n\t\tthis.durationString = ratioToString(duration)\n\t}\n\n\t/* importChord: Transform a string into the defined notes forming the chord.\n\t * params:\n\t *     root: The midi root note.\n\t *     modulation: The modulation to apply on the chord.\n\t * returns: The list of the frequencies making the chord.\n\t */\n\timportChord(root, modulation) {\n\t\t// Ensure the modulation exist.\n\t\tif (!Object.prototype.hasOwnProperty.call(chordModulations, modulation))\n\t\t\tthrow `Invalid chord name: '${modulation}'.`\n\n\t\t// Get the modulation's construction and map each semitone to a new note.\n\t\tvar chordConstruction = chordModulations[modulation]\n\n\t\treturn chordConstruction.map((semitoneCount) => {\n\t\t\treturn mtf(root + semitoneCount)\n\t\t})\n\t}\n\n\t/* play: Play the current chord, for the audio context, at a defined tempo,\n\t *       from a defined time.\n\t * arguments:\n\t *   synth: The synth to play the notes on.\n\t *   tempo: The tempo, in BPM.\n\t *   time:  The time to start the chord in the audio context.\n\t * returns: The next time to play a chord (the time + the current duration)\n\t */\n\tplay(synth, tempo, time) {\n\t\t// The effective duration of the chord is based on the number of beat, and\n\t\t// the time per beat, because the tempo is passed in Beat Per Minute, the\n\t\t// reference is 15 (60 / 4 for a quarter note reference).\n\t\tvar endTime = time + this.duration * (15.0 / tempo)\n\n\t\t// Play all the pitches at the same time.\n\t\tthis.pitches.map((pitch) => {\n\t\t\tsynth.play(pitch, time, endTime)\n\t\t})\n\n\t\treturn endTime\n\t}\n\n\t/* Generate a random chord, based on the passed parameters.\n\t * params:\n\t *     duration: The duration of the chord, default to random one.\n\t *     modulationListName: The current modulation list to use.\n\t * returns: A new randomly-created chord.\n\t */\n\tstatic random(duration = undefined, modulationListName = 'simple') {\n\t\t// Generate a silence in 10% of the chords.\n\t\tif (Math.random() * 100 <= 10) {\n\t\t\treturn new Chord(-1, undefined, duration)\n\t\t}\n\n\t\t// Possible notes range: A3-A4\n\t\tconst root = 57 + ((Math.random() * 12) | 0)\n\n\t\tconst modulationList = modulationLists[modulationListName]\n\t\tconst modulation = modulationList[Math.floor(Math.random() * modulationList.length)]\n\n\t\treturn new Chord(root, modulation, duration)\n\t}\n}\n\nexport { Chord, chordsToHTML, randomChords, modulationToNoteNames }\n","<template>\n\t<div id=\"help\">\n\t\t<div @click=\"visible = !visible\">Help</div>\n\t\t<div id=\"help\" v-if=\"visible\">\n\t\t\t<p>\n\t\t\t\tHey, welcome to RCM. <br />\n\t\t\t\tAs you can already see, it's generating music for you. <br />\n\t\t\t\tThe notation is based on the\n\t\t\t\t<a href=\"https://en.wikipedia.org/wiki/Chord_(music)#Tabular_notation\"\n\t\t\t\t\t>tabular notation</a\n\t\t\t\t>\n\t\t\t\twith the added <b>S</b> for silence. A chord with no modulation (maj, min,&nbsp;...)\n\t\t\t\tis describing the root note alone.<br />\n\t\t\t\tThe symbols are showing the rythm used for each chord, if you want to see the\n\t\t\t\tchord's composition, hit <b>notes</b>. <br />\n\t\t\t\t<br />\n\t\t\t\tYou can play along with the different parameters:\n\t\t\t</p>\n\t\t\t<dl>\n\t\t\t\t<dt>Play</dt>\n\t\t\t\t<dd>Self explanatory.</dd>\n\t\t\t\t<dt>Metro</dt>\n\t\t\t\t<dd>Add a tick every quarter notes.</dd>\n\t\t\t\t<dt>Reload</dt>\n\t\t\t\t<dd>Reload the chords.</dd>\n\t\t\t\t<dt>Notes</dt>\n\t\t\t\t<dd>Display the notes forming the chord.</dd>\n\t\t\t\t<dt id=\"help-rhythm\">{{ rhythm }}</dt>\n\t\t\t\t<dd>Change the rythm generation method.</dd>\n\t\t\t\t<dt id=\"help-modulation\">{{ modulation }}</dt>\n\t\t\t\t<dd>The list of available modulations.</dd>\n\t\t\t\t<dt id=\"help-tempo\">{{ tempo }}</dt>\n\t\t\t\t<dd>The tempo against the quarter note.</dd>\n\t\t\t\t<dt id=\"help-duration\">{{ duration }}</dt>\n\t\t\t\t<dd>The number of 16th notes you want.</dd>\n\t\t\t\t<dt id=\"help-volume\">{{ volume }}</dt>\n\t\t\t\t<dd>The volume.</dd>\n\t\t\t</dl>\n\t\t</div>\n\t</div>\n</template>\n\n<style lang=\"stylus\" scoped>\n\t#help\n\t\tmax-width 50em\n\t\tmargin 1em auto\n\t\ttext-transform none\n\t\ttext-align left\n\n\t\t> div:nth-child(1)\n\t\t\tcursor pointer\n\n\t\ta\n\t\t\tcolor black\n\n\t\tdl\n\t\t\tdisplay grid\n\t\t\tgrid-template-columns max-content auto\n\n\t\tdt\n\t\t\tgrid-column-start 1\n\t\t\tfont-weight bold\n\t\t\tpadding-right 0.5em\n\t\t\ttext-transform capitalize\n\n\t\tdd\n\t\t\tgrid-column-start 2\n\t\t\tmargin 0\n</style>\n\n<script>\n\texport default {\n\t\tname: 'help',\n\t\tprops: ['volume', 'tempo', 'duration', 'modulation', 'rhythm'],\n\t\tdata: function () {\n\t\t\treturn {\n\t\t\t\tvisible: false,\n\t\t\t}\n\t\t},\n\t}\n</script>\n","import { render } from \"./Help.vue?vue&type=template&id=44096c40&scoped=true\"\nimport script from \"./Help.vue?vue&type=script&lang=js\"\nexport * from \"./Help.vue?vue&type=script&lang=js\"\n\nimport \"./Help.vue?vue&type=style&index=0&id=44096c40&lang=stylus&scoped=true\"\n\nimport exportComponent from \"/home/runner/work/rcm/rcm/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-44096c40\"]])\n\nexport default __exports__","<template>\n\t<div>\n\t\t<span class=\"rhythm\">\n\t\t\t<i\n\t\t\t\tv-for=\"duration in value.durationString.split('')\"\n\t\t\t\t:class=\"duration\"\n\t\t\t\t:key=\"duration\"\n\t\t\t></i>\n\t\t</span>\n\n\t\t<span class=\"note\">\n\t\t\t{{ root }}\n\t\t</span>\n\t\t<span class=\"modulation\"> {{ value.modulation }} </span>\n\n\t\t<ul class=\"notes\" v-if=\"detailed\">\n\t\t\t<li v-for=\"note in notes\" :key=\"note\">{{ note.join('') }}</li>\n\t\t</ul>\n\t</div>\n</template>\n\n<style lang=\"stylus\">\n\t/*\n\tSimple css recreation of the musical symbols. Only used for rhythm, those\n\tdefinitions will recreate the whole, half, ..., sixteenth note symbols.\n\tThe notes can be any elements, preferably empty (like a <i></i> for instance)\n\tand must use one of the following class:\n\t - w for whole note\n\t - h for half note\n\t - q for quarter note\n\t - e for eighth note\n\t - s for sixteenth note\n\n\tThose note need to be placed in a 'rhythm' element.\n\tTo change the size of the notes, modify the w variable below.\n\t*/\n\n\tw = 1em\n\n\t// More defined sizes\n\th = w * 3\n\tnoteheadHeight = h / 4\n\tstemWidth = w / 8\n\tflagHeigth = h / 8\n\n\t// Some colors, changing the background will mess up the display, don't do\n\t// that.\n\tforeground = black\n\tbackground = transparent\n\n\t.name\n\t\ttext-transform: uppercase\n\n\t.modulation\n\t\ttext-transform: lowercase\n\n\t.rhythm\n\t\t// Basic definition for the element, since it can be applied to any type of\n\t\t// box, let's make things neat.\n\t\tdisplay: block\n\n\t\t& > *\n\t\t\tposition relative\n\t\t\tdisplay inline-block\n\t\t\twidth w\n\t\t\theight h\n\n\t\t\t// For the flags\n\t\t\tmargin-right (w / 3)\n\n\t\t\t// For the notehead\n\t\t\tmargin-bottom noteheadHeight\n\n\t\t\t// The notehead is made with a before element, fix everything her so we can\n\t\t\t// focus on the styling later.\n\t\t\t&::before\n\t\t\t\tcontent \"\"\n\t\t\t\tbox-sizing border-box\n\t\t\t\tbackground-color white\n\t\t\t\twidth w\n\t\t\t\theight noteheadHeight\n\t\t\t\tposition absolute\n\t\t\t\tbottom -(h / 7)\n\t\t\t\tleft (w / 8)\n\t\t\t\tborder-radius 50%\n\n\t\t\t\t// The basic border definition, will change for the different note\n\t\t\t\t// values.\n\t\t\t\tborder (w / 12) solid foreground\n\n\t\t// Whole note is an oval with left/right border. No stem.\n\t\t.w::before\n\t\t\tborder-left-width (w / 3)\n\t\t\tborder-right-width (w / 3)\n\n\t\t// All other notes have a stem and the notehead is slightly tilted.\n\t\t.h, .q, .e, .s\n\t\t\tborder-right stemWidth solid foreground\n\t\t\t&::before\n\t\t\t\ttransform rotatez(-15deg)\n\n\t\t// A half note has a top/down border\n\t\t.h\n\t\t\t&::before\n\t\t\t\tborder-top-width (w / 4.5)\n\t\t\t\tborder-bottom-width (w / 4.5)\n\n\t\t// All the remaining values have a filled notehead.\n\t\t.q, .e, .s\n\t\t\t&::before\n\t\t\t\tbackground-color foreground\n\n\t\t// For eigth and sixteenth notes, we need the flags, these are done using a\n\t\t// linear gradient on the after element.\n\t\t.e, .s\n\t\t\t&::after\n\t\t\t\tcontent ''\n\t\t\t\tposition absolute\n\t\t\t\ttop 0px\n\t\t\t\twidth w\n\t\t\t\tright -1*w\n\t\t\t\theight h\n\t\t\t\t// 1 Flag\n\t\t\t\tbackground-image linear-gradient(180deg, foreground 0, foreground flagHeigth, background 0, background flagHeigth)\n\n\t\t.s::after\n\t\t\t// 2 Flags\n\t\t\tbackground-image linear-gradient(180deg, foreground 0, foreground flagHeigth, background 0, background flagHeigth, background flagHeigth * 2, foreground flagHeigth * 2, foreground flagHeigth * 3, background flagHeigth * 2, background flagHeigth * 3)\n\n\t.notes\n\t\tlist-style: none\n\t\tfont-size: 0.5em\n\t\tpadding: 0.5em 0\n</style>\n\n<script>\n\timport { modulationToNoteNames } from '@/lib/chord.js'\n\timport { Note } from '@/lib/theory.js'\n\n\texport default {\n\t\tname: 'chord',\n\t\tprops: ['value', 'detailed'],\n\t\tcomputed: {\n\t\t\troot() {\n\t\t\t\tif (this.value.root > 0) {\n\t\t\t\t\treturn Note.fromMidi(this.value.root).toString()\n\t\t\t\t} else {\n\t\t\t\t\treturn 'S'\n\t\t\t\t}\n\t\t\t},\n\t\t\tnotes() {\n\t\t\t\treturn modulationToNoteNames(this.value.root, this.value.modulation)\n\t\t\t},\n\t\t},\n\t}\n</script>\n","/*\n * How to write a guitar shape (here in 2nd position).                 -> Emin\n * 1. Find the leftmost note on the guitar neck and mark its position. -> 7\n * 2. String by string, add where the fingers are relative to this position\n *   a. Nothing is on string 1, skipping.                              ->\n *   b. E is on 2nd string, 0th fret. We bar the 5 strings.            -> 0b5\n *   c. B is on 3rd string, 2nd fret.                                  -> 2\n *   d. E is on 4th string, 2nd fret.                                  -> 2\n *   e. G is on 5th string, 1st fret.                                  -> 1\n * 3. Join with `:` and `;`                                            -> 7:;0b5;2;2;1\n *\n * All the chords are assumed to be modulations of E, the transposition will be done later.\n */\nconst GuitarShapes = {\n\t'': ['0:0', '7:;0', '2:;;0', '9:;;;0', '5:;;;;0', '0:;;;;;0'],\n\t5: ['0:0;2', '7:;0;2', '2:;;0;2', '9:;;;0;3', '5:;;;;0;2'],\n\tmajor: [\n\t\t'0:0b6;2;2;1',\n\t\t'7:;0b5;2;2;2',\n\t\t'7:;;2b3;',\n\t\t'10:3;2;0',\n\t\t'4:;3;2;0',\n\t\t'0:;;2;1;0',\n\t\t'7:;;;2;2;0',\n\t\t'2:;;0;2;3;2',\n\t\t'2:;;;2;3;2',\n\t],\n\tminor: [\n\t\t'0:0b6;2;2',\n\t\t'7:;0b5;2;2;1',\n\t\t'7:;;2;2;1',\n\t\t'10:3;1;0',\n\t\t'4:;3;1;0',\n\t\t'0:;;2;0;0',\n\t\t'0:;;;0;0;0',\n\t\t'7:;;;2;1;0',\n\t\t'2:;;0;2;3;1',\n\t\t'2:;;;2;3;1',\n\t],\n\taugmented: ['0:0b6;3;2;1', '7:;0b5;3;2;2'],\n\tdiminished: ['0:0b6;1;2', '7:;0b5;1;2;1'],\n\t7: ['0:0b6;2;;1', '7:;0b5;2;;2'],\n\t'major 7': ['0:0b6;2;1;1', '7:;0b5;2;1;2'],\n\t'minor 7': ['0:0b6;2', '7:;0b5;2;;1'],\n\t'minor major 7': ['0:0b6;2;1', '7:;0b5;2;1;1'],\n\t'half diminished 7': ['0:0b6;1', '7:;0b5;1'],\n\t'diminished 7': ['11:1;2;0;1', '6:;1;2;0;2'],\n\t'augmented 7': ['0:0b6;3;2;1', '7:;0b5;3;2;3'],\n}\n\nfunction shapeToObject(s) {\n\tlet o = { position: -1, strings: [{}, {}, {}, {}, {}, {}] }\n\n\ts = s.split(':')\n\tconst position = s[0]\n\tlet tail = s[1]\n\n\to.position = parseInt(position)\n\n\ttail.split(';').forEach((s, i) => {\n\t\tswitch (s) {\n\t\t\tcase '':\n\t\t\t\treturn\n\t\t\tcase 'm':\n\t\t\t\to.strings[i] = { muted: true }\n\t\t\t\treturn\n\t\t\tcase 'o':\n\t\t\t\to.strings[i] = { open: true }\n\t\t\t\treturn\n\t\t}\n\n\t\to.strings[i] = {\n\t\t\tposition: parseInt(s[0]),\n\t\t}\n\n\t\t// Handle bars\n\t\tif (s.indexOf('b') === 1) {\n\t\t\to.strings[i].bar = parseInt(s[2])\n\t\t}\n\t})\n\n\treturn o\n}\n\nexport { GuitarShapes, shapeToObject }\n","import { GuitarShapes, shapeToObject } from '@/lib/guitar.js'\n\nclass Note {\n\t// All note names with absolute positions, same \"value\" will be in the same position.\n\tstatic names = [\n\t\t['G##', 'A', 'Bbb'],\n\t\t['A#', 'Bb', 'Cbb'],\n\t\t['A##', 'B', 'Cb'],\n\t\t['B#', 'C', 'Dbb'],\n\t\t['B##', 'C#', 'Db'],\n\t\t['C##', 'D', 'Ebb'],\n\t\t['D#', 'Eb', 'Fbb'],\n\t\t['D##', 'E', 'Fb'],\n\t\t['E#', 'F', 'Gbb'],\n\t\t['E##', 'F#', 'Gb'],\n\t\t['F##', 'G', 'Abb'],\n\t\t['G#', 'Ab'],\n\t]\n\n\t// All natural names.\n\tstatic naturals = ['A', 'B', 'C', 'D', 'E', 'F', 'G']\n\n\t// All note names without position, used for quick validity check.\n\tstatic allNames = [].concat.apply([], Note.names)\n\tstatic basicNames = Note.allNames.filter((a) => a.length !== 3)\n\t// There are 12 tones in standard western tuning.\n\tstatic count = 12\n\n\t// List of accidentals per key, only sharps. Flats can be computed from 12-sharps\n\t// Sharps are generally below 6, flats above.\n\tstatic accidentals = [3, 10, 5, 0, 7, 2, 9, 4, 11, 6, 1, 8]\n\n\tconstructor(note, octave, accidental) {\n\t\tthis.accidental = '' // Default, will be updated below\n\t\tthis.octave = octave !== 0 && !octave ? 4 : octave // Default to octave 4\n\n\t\tlet index = 0\n\n\t\t// Handle the note\n\t\tif (isFinite(String(note)) && note >= 0 && note <= 12) {\n\t\t\t// Note is an index, e.g. '1'\n\t\t\tindex = parseInt(note, 10)\n\t\t\tthis.natural = Note.names[index][1][0]\n\t\t} else {\n\t\t\t// Note is a name, e.g. 'A'\n\t\t\tNote.validate(note)\n\t\t\tindex = Note.nameToIndex(note)\n\t\t\tthis.natural = note[0]\n\t\t}\n\n\t\tif (accidental === '#') {\n\t\t\tindex = (index + 1) % 12\n\t\t} else if (accidental === '##') {\n\t\t\tindex = (index + 2) % 12\n\t\t} else if (accidental === 'b') {\n\t\t\tindex = (index + 11) % 12\n\t\t} else if (accidental === 'bb') {\n\t\t\tindex = (index + 10) % 12\n\t\t} else {\n\t\t\t// If the parametered accidental is nil but the given note name had one,\n\t\t\t// we need to keep it into account. It doesn't shift the index, just\n\t\t\t// might change the note name.\n\t\t\tif (note.length > 1) {\n\t\t\t\taccidental = note.slice(1, note.length)\n\t\t\t}\n\t\t}\n\n\t\tthis.index = index\n\t\tthis.name = Note.indexToName(index, this.natural)\n\n\t\tif (this.name.length > 1) {\n\t\t\tthis.accidental = this.name.slice(1, this.name.length)\n\t\t}\n\t}\n\n\t// Index compute the index relative to the note names.\n\tstatic nameToIndex(name) {\n\t\tNote.validate(name)\n\t\tfor (let index = 0; index < Note.count; index++) {\n\t\t\tif (Note.names[index].includes(name)) {\n\t\t\t\treturn index\n\t\t\t}\n\t\t}\n\t}\n\n\t// Name computes a note name from the index and the natural.\n\tstatic indexToName(index, natural) {\n\t\tconst candidates = Note.names[index]\n\t\tif (!candidates) {\n\t\t\tthrow new Error(`invalid note index: ${index}`)\n\t\t}\n\n\t\treturn candidates.filter((name) => name[0] === natural)[0]\n\t}\n\n\t// fromMidi create a note from the midi value.\n\tstatic fromMidi(midi) {\n\t\tif (midi < 21 || midi > 108) throw new Error(`invalid midi ${midi}`)\n\n\t\t// List all possible note to simplify the computation to a single modulo.\n\t\tconst names = this.names[(midi - 21) % 12]\n\n\t\t// Use the same method but move the change to the note between B and C\n\t\tconst octave = Math.floor((midi - 12) / 12)\n\n\t\treturn new Note(names[0], octave)\n\t}\n\n\t// Return the accidental signature of the key, e.g. 4b, 0, 6#\n\tsignature() {\n\t\tconst count = Note.accidentals[this.index]\n\n\t\tif (count === 0) return '0'\n\n\t\tif (this.accidental === '') {\n\t\t\tif (count <= 6) return count + '#'\n\t\t\treturn 12 - count + 'b'\n\t\t}\n\n\t\treturn (this.accidental === '#' ? count : 12 - count) + this.accidental\n\t}\n\n\t// midi exports the midi value of the note\n\tmidi() {\n\t\treturn (\n\t\t\t// Change of octave happens between B and C, shift 9 semitones to reflect\n\t\t\t// that.\n\t\t\t((this.index + 9) % 12) +\n\t\t\t// Add the octave value\n\t\t\t12 * (this.octave + 1)\n\t\t)\n\t}\n\n\t// frequency converts the note to its Hertz frequency.\n\tfrequency() {\n\t\t// Using http://www.glassarmonica.com/science/frequency_midi.php\n\t\t// f = 27.5 * 2 ^ ((midi - 21)/12)\n\t\t// Midi notes are from 21 (A0, 27.5Hz) to 108 (C8, 4186Hz)\n\t\treturn 27.5 * Math.pow(2, (this.midi() - 21.0) / 12.0)\n\t}\n\n\tstatic random() {\n\t\treturn Note.basicNames[(Math.random() * Note.basicNames.length) << 0]\n\t}\n\n\tstatic isValid(name) {\n\t\treturn Note.allNames.includes(name)\n\t}\n\n\tstatic validate(name) {\n\t\tif (!Note.isValid(name)) {\n\t\t\tthrow new Error(`invalid note name: ${name}`)\n\t\t}\n\t}\n\n\ttoString(includeOctave) {\n\t\tconst name = this.name\n\t\t\t.replaceAll('bb', '')\n\t\t\t.replaceAll('##', '')\n\t\t\t.replace('b', '')\n\t\t\t.replace('#', '')\n\t\treturn `${name}${includeOctave ? this.octave : ''}`\n\t}\n}\n\nclass Interval {\n\t// List of all main intervals with their names.\n\tstatic names = [\n\t\t'unison',\n\t\t'minor 2nd',\n\t\t'major 2nd',\n\t\t'minor 3rd',\n\t\t'major 3rd',\n\t\t'perfect 4th',\n\t\t'tritone',\n\t\t'perfect 5th',\n\t\t'minor 6th',\n\t\t'major 6th',\n\t\t'minor 7th',\n\t\t'major 7th',\n\t\t'octave',\n\t\t'minor 9th',\n\t\t'major 9th',\n\t\t'minor 10th',\n\t\t'major 10th',\n\t\t'perfect 11th',\n\t]\n\n\tconstructor(root, data) {\n\t\t// Treat the root\n\t\tif (!root) return\n\n\t\tif (root instanceof Note) {\n\t\t\tthis.notes = [root]\n\t\t} else {\n\t\t\tNote.validate(root)\n\t\t\tthis.notes = [new Note(root)]\n\t\t}\n\n\t\t// Treat the data\n\t\tif (data === 0 || data) this.setData(data)\n\t}\n\n\tsetData(data) {\n\t\t// Data is a the second note, compute the interval.\n\t\tif (Note.isValid(data)) {\n\t\t\tthis.notes.push(new Note(data))\n\n\t\t\tlet diff = this.notes[1].index - this.notes[0].index\n\t\t\tif (diff < 0) diff += 12\n\t\t\tthis.interval = diff\n\n\t\t\treturn\n\t\t}\n\n\t\tif (Interval.names.includes(data)) {\n\t\t\t// Data is the interval name, compute the new note.\n\t\t\tthis.interval = Interval.names.indexOf(data)\n\t\t} else {\n\t\t\t// Data is the number of steps from the root.\n\t\t\tthis.interval = Number(data)\n\t\t\tif (!this.interval && this.interval !== 0) throw new Error(`invalid data: '${data}'`)\n\t\t}\n\n\t\t// Compute the new note index from the interval.\n\t\tconst noteIndex = this.notes[0].index + this.interval\n\n\t\t// Add the note with the default octave, use %12 to get the right note name.\n\t\tthis.notes.push(new Note(noteIndex % 12))\n\n\t\t// Check if there is an octave change.\n\t\tif (\n\t\t\t// interval is above an octave\n\t\t\tthis.interval > 12 ||\n\t\t\t// index is above 15, it needs to be above 15 to go around. e.g.:\n\t\t\t// E + minor 6th = C => 7 + 8 => 15\n\t\t\t// G + perfect 4th = C => 10 + 5 => 15\n\t\t\tnoteIndex >= 15 ||\n\t\t\t// If the starting note is below C and the second note is above C.\n\t\t\t(this.notes[0].index < 3 && noteIndex >= 3)\n\t\t) {\n\t\t\tthis.notes[1].octave = this.notes[0].octave + 1\n\t\t}\n\t}\n\n\tname() {\n\t\treturn Interval.names[this.interval]\n\t}\n\n\tstatic random(root, allowed) {\n\t\tif (!root) root = Note.random()\n\n\t\tlet interval = null\n\t\tif (!allowed || allowed.length === 0) {\n\t\t\tinterval = (Math.random() * Interval.names.length) << 0\n\t\t} else {\n\t\t\tinterval = allowed[(Math.random() * allowed.length) << 0]\n\t\t}\n\n\t\treturn new Interval(root, interval)\n\t}\n\n\tfrequencies() {\n\t\treturn this.notes.map((x) => x.frequency())\n\t}\n\n\ttoString() {\n\t\treturn `${this.notes[0]} ${this.notes[1]}: ${Interval.names[this.interval]}`\n\t}\n}\n\n// List of all main chords with their interval and tones from the root.\nclass Chord {\n\tstatic names = {\n\t\t'': {\n\t\t\t// only the root note\n\t\t\ttones: [],\n\t\t\tintervals: [],\n\t\t},\n\t\tmajor: { tones: [4, 7], intervals: [4, 3] },\n\t\tminor: { tones: [3, 7], intervals: [3, 4] },\n\t\tdiminished: { tones: [3, 6], intervals: [3, 3] },\n\t\taugmented: { tones: [4, 8], intervals: [4, 4] },\n\t\t5: { tones: [7], intervals: [7] },\n\t\t'dominant 7': { tones: [4, 7, 10], intervals: [4, 3, 3] },\n\t\t'major 7': { tones: [4, 7, 11], intervals: [4, 3, 4] },\n\t\t'minor 7': { tones: [3, 7, 10], intervals: [4, 3, 3] },\n\t\t'minor major 7': { tones: [3, 7, 11], intervals: [4, 4, 3] },\n\t\t'diminished 7': { tones: [3, 6, 9], intervals: [3, 3, 3] },\n\t\t'half diminished 7': { tones: [3, 6, 10], intervals: [3, 3, 4] },\n\t\t'augmented 7': { tones: [4, 8, 11], intervals: [4, 4, 4] },\n\t}\n\n\tconstructor(root, ...data) {\n\t\t// Treat the root\n\t\tif (!root) return\n\n\t\tNote.validate(root)\n\n\t\tthis.notes = [new Note(root)]\n\t\tthis.name = '' // default name\n\n\t\t// Treat the data\n\t\tif (data !== 0 && (!data || data.length === 0)) return\n\n\t\tif (data.length === 1) {\n\t\t\t// Data is the chord name, compute the notes\n\t\t\tconst chord = Chord.names[data[0]]\n\t\t\tif (chord) {\n\t\t\t\tthis.name = data[0]\n\t\t\t\tfor (let i = 0, j = chord.tones.length; i < j; i++) {\n\t\t\t\t\tthis.notes.push(new Note((this.notes[0].index + chord.tones[i]) % 12))\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthrow new Error(`invalid arguments: ${data}`)\n\t\t\t}\n\t\t} else {\n\t\t\t// Data is the list of notes names, TODO\n\t\t\tthrow new Error(\"doesn't handle multiple arguments yet\")\n\t\t}\n\t}\n\n\tstatic random(root) {\n\t\tif (!root) root = Note.random()\n\n\t\tconst names = Object.keys(Chord.names)\n\t\tconst name = names[(Math.random() * names.length) << 0]\n\n\t\treturn new Chord(root, name)\n\t}\n\n\tstatic allMod() {\n\t\treturn Object.keys(this.names).map((m) => new Chord('A', m))\n\t}\n\n\t// Convert to a list of possible guitar positions.\n\ttoGuitarPosition() {\n\t\t// compute the neck position for the note\n\t\tconst position = (this.notes[0].midi() - 16) % 12\n\n\t\tif (this.name in GuitarShapes) {\n\t\t\treturn GuitarShapes[this.name].map((s) => {\n\t\t\t\tconst o = shapeToObject(s)\n\t\t\t\to.position = (o.position + position) % 12\n\t\t\t\treturn o\n\t\t\t})\n\t\t}\n\n\t\treturn {}\n\t}\n\n\ttoString(detailed) {\n\t\tlet ret = `${this.notes[0]} ${this.name}`\n\t\tif (detailed) {\n\t\t\tret += `: ${this.notes.join(' ')}`\n\t\t}\n\t\treturn ret\n\t}\n}\n\n// List of all main scales with their interval and tones from the root.\nclass Scale {\n\tstatic names = {\n\t\tmajor: { tones: [2, 4, 5, 7, 9, 11], intervals: [2, 2, 1, 2, 2, 2, 1] },\n\t\tionian: { tones: [2, 4, 5, 7, 9, 11], intervals: [2, 2, 1, 2, 2, 2, 1] },\n\t\tdorian: { tones: [2, 3, 5, 7, 9, 10], intervals: [2, 1, 2, 2, 2, 1, 2] },\n\t\tphrygian: { tones: [1, 3, 5, 7, 8, 10], intervals: [1, 2, 2, 2, 1, 2, 2] },\n\t\t// continue in https://en.wikipedia.org/wiki/Mode_(music)#Analysis\n\t\t'harmonic minor': { tones: [2, 3, 5, 7, 8, 10], intervals: [2, 1, 2, 2, 1, 2, 2] },\n\t\tpentatonic: { tones: [2, 4, 7, 9], intervals: [2, 2, 3, 2, 2, 3] },\n\t\t// Not yet well supported\n\t\t// 'whole-tone': { tones: [2, 4, 6, 8, 10], intervals: [2, 2, 2, 2, 2, 2] },\n\t\t// chromatic: { tones: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11], intervals: [1, 1, 1, 1, 1, 1, 1, 1, 1, 1] }\n\t}\n\n\tstatic allNames = Object.keys(Scale.names)\n\n\tconstructor(root, ...data) {\n\t\t// Treat the root\n\t\tif (!root) return\n\n\t\tif (root instanceof Note) {\n\t\t\tthis.notes = [root]\n\t\t} else {\n\t\t\tNote.validate(root)\n\t\t\tthis.notes = [new Note(root)]\n\t\t}\n\n\t\tthis.name = 'major' // default name\n\n\t\t// Treat the data\n\t\tif (data !== 0 && (!data || data.length === 0)) return\n\n\t\tif (data.length === 1) {\n\t\t\t// Data is the scale name, compute the notes\n\t\t\tif (Scale.names[data[0]]) {\n\t\t\t\tthis.name = data[0]\n\t\t\t} else {\n\t\t\t\tthrow new Error(`invalid scale arguments: ${data}`)\n\t\t\t}\n\t\t} else {\n\t\t\t// Data is the list of notes names, TODO\n\t\t\tthrow new Error(\"doesn't handle multiple arguments yet\")\n\t\t}\n\n\t\tthis.noteList()\n\t}\n\n\t// Create the list of notes for the current scale\n\tnoteList() {\n\t\tconst rootIndex = this.notes[0].index\n\t\t// const rootAccidental = this.notes[0].accidental\n\t\tconst tones = Scale.names[this.name].tones\n\t\tconst intervals = Scale.names[this.name].intervals\n\n\t\tlet previousNote = this.notes[0]\n\t\tlet natural = Note.naturals.indexOf(this.notes[0].name[0])\n\t\tlet octave = 4\n\n\t\tfor (let i = 0, j = tones.length; i < j; i++) {\n\t\t\tconst newNoteIndex = (rootIndex + tones[i]) % 12\n\t\t\tlet newNote = new Note(newNoteIndex, octave)\n\n\t\t\t// Skipping a note when jumping by a third.\n\t\t\tif (intervals[i] === 3) {\n\t\t\t\tnatural++\n\t\t\t}\n\n\t\t\tconst expectedNatural = Note.naturals[++natural % 7]\n\n\t\t\t// The expected natural isn't right, we need to switch it.\n\t\t\tif (expectedNatural !== newNote.name[0]) {\n\t\t\t\tconst newName = Note.names[newNote.index].filter(\n\t\t\t\t\t(name) => name[0] === expectedNatural\n\t\t\t\t)[0]\n\t\t\t\tif (newName) newNote = new Note(newName, octave)\n\t\t\t}\n\n\t\t\t// Check that the midi notes are only increasing\n\t\t\tif (newNote.midi() < previousNote.midi()) {\n\t\t\t\t// Switch octave if we ever get a smaller midi note.\n\t\t\t\tnewNote.octave = ++octave\n\t\t\t}\n\n\t\t\tpreviousNote = newNote\n\t\t\tthis.notes.push(newNote)\n\t\t}\n\t}\n\n\tstatic random(root, allowed) {\n\t\tif (!root) root = Note.random()\n\n\t\tlet index = null\n\t\tif (!allowed || allowed.length === 0) {\n\t\t\tindex = (Math.random() * Scale.allNames.length) << 0\n\t\t} else {\n\t\t\tindex = allowed[(Math.random() * allowed.length) << 0]\n\t\t}\n\t\tconst name = Scale.allNames[index]\n\n\t\treturn new Scale(root, name)\n\t}\n\n\ttoString() {\n\t\treturn `${this.notes[0]} ${this.name}: ${this.notes.join(' ')}`\n\t}\n}\n\nexport { Note, Interval, Chord, Scale }\n","import { render } from \"./Chord.vue?vue&type=template&id=43d9b10a\"\nimport script from \"./Chord.vue?vue&type=script&lang=js\"\nexport * from \"./Chord.vue?vue&type=script&lang=js\"\n\nimport \"./Chord.vue?vue&type=style&index=0&id=43d9b10a&lang=stylus\"\n\nimport exportComponent from \"/home/runner/work/rcm/rcm/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./Rcm.vue?vue&type=template&id=858cb7ba\"\nimport script from \"./Rcm.vue?vue&type=script&lang=js\"\nexport * from \"./Rcm.vue?vue&type=script&lang=js\"\n\nimport \"./Rcm.vue?vue&type=style&index=0&id=858cb7ba&lang=stylus\"\n\nimport exportComponent from \"/home/runner/work/rcm/rcm/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<div class=\"exercise\">\n\t\t<h1>Interval Exercises</h1>\n\n\t\t<div class=\"exercise-selection\">\n\t\t\t<details>\n\t\t\t\t<summary>{{ exercises[currentExercise] }}</summary>\n\t\t\t\t<ul>\n\t\t\t\t\t<li\n\t\t\t\t\t\tv-for=\"(exercise, index) in exercises\"\n\t\t\t\t\t\t@click=\"currentExercise = index\"\n\t\t\t\t\t\t:key=\"index\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{{ exercise }}\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t</details>\n\t\t</div>\n\n\t\t<table v-if=\"currentExercise == 0\">\n\t\t\t<tr>\n\t\t\t\t<th>Interval</th>\n\t\t\t\t<th>Note</th>\n\t\t\t\t<td><button @click=\"reload()\">reload</button></td>\n\t\t\t</tr>\n\n\t\t\t<tr>\n\t\t\t\t<td></td>\n\t\t\t\t<td id=\"root\">\n\t\t\t\t\t{{ interval.notes[0].toString() }}\n\t\t\t\t\t<span class=\"lockRoot\" @click=\"rootLocked = !rootLocked\">\n\t\t\t\t\t\t{{ rootLocked ? '&#x1f512;' : '&#x1f513;' }}\n\t\t\t\t\t</span>\n\t\t\t\t</td>\n\t\t\t\t<td><button @click=\"play(0)\">play</button></td>\n\t\t\t</tr>\n\n\t\t\t<tr>\n\t\t\t\t<td>{{ interval.name() }}</td>\n\t\t\t\t<td>\n\t\t\t\t\t<toggle-answer>{{ interval.notes[1].toString() }}</toggle-answer>\n\t\t\t\t</td>\n\t\t\t\t<td><button @click=\"play(1)\">play</button></td>\n\t\t\t</tr>\n\t\t</table>\n\n\t\t<table v-if=\"currentExercise == 1\">\n\t\t\t<tr>\n\t\t\t\t<th>Interval</th>\n\t\t\t\t<th>Note</th>\n\t\t\t\t<td><button @click=\"reload()\">reload</button></td>\n\t\t\t</tr>\n\n\t\t\t<tr>\n\t\t\t\t<td></td>\n\t\t\t\t<td id=\"root\">\n\t\t\t\t\t{{ interval.notes[0].toString() }}\n\t\t\t\t\t<span class=\"lockRoot\" @click=\"rootLocked = !rootLocked\">\n\t\t\t\t\t\t{{ rootLocked ? '&#x1f512;' : '&#x1f513;' }}\n\t\t\t\t\t</span>\n\t\t\t\t</td>\n\t\t\t\t<td><button @click=\"play(0)\">play</button></td>\n\t\t\t</tr>\n\n\t\t\t<tr>\n\t\t\t\t<td>\n\t\t\t\t\t<toggle-answer> {{ interval.name() }} </toggle-answer>\n\t\t\t\t</td>\n\t\t\t\t<td>{{ interval.notes[1].toString() }}</td>\n\t\t\t\t<td><button @click=\"play(1)\">play</button></td>\n\t\t\t</tr>\n\t\t</table>\n\n\t\t<table v-if=\"currentExercise == 2\">\n\t\t\t<tr>\n\t\t\t\t<th>Interval</th>\n\t\t\t\t<th>Note</th>\n\t\t\t\t<td><button @click=\"reload()\">reload</button></td>\n\t\t\t</tr>\n\n\t\t\t<tr>\n\t\t\t\t<td></td>\n\t\t\t\t<td id=\"root\">\n\t\t\t\t\t{{ interval.notes[0].toString() }}\n\t\t\t\t\t<span class=\"lockRoot\" @click=\"rootLocked = !rootLocked\">\n\t\t\t\t\t\t{{ rootLocked ? '&#x1f512;' : '&#x1f513;' }}\n\t\t\t\t\t</span>\n\t\t\t\t</td>\n\t\t\t\t<td><button @click=\"play(0)\">play</button></td>\n\t\t\t</tr>\n\n\t\t\t<tr>\n\t\t\t\t<td>\n\t\t\t\t\t<toggle-answer> {{ interval.name() }} </toggle-answer>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<toggle-answer>{{ interval.notes[1].toString() }}</toggle-answer>\n\t\t\t\t</td>\n\t\t\t\t<td><button @click=\"play(1)\">play</button></td>\n\t\t\t</tr>\n\t\t</table>\n\n\t\t<item-selector name=\"interval\" :items=\"intervalList\" v-model=\"selectedIntervals\" />\n\t</div>\n</template>\n\n<style lang=\"stylus\">\n\t@import '~@/styles/exercises'\n</style>\n\n<script>\n\timport ToggleAnswer from '@/components/Toggle-answer.vue'\n\timport ItemSelector from '@/components/Item-selector.vue'\n\n\timport { Interval } from '@/lib/theory.js'\n\timport { Synth } from '@/lib/synth.js'\n\n\texport default {\n\t\tname: 'Interval',\n\t\tcomponents: {\n\t\t\tToggleAnswer,\n\t\t\tItemSelector,\n\t\t},\n\t\tdata: function () {\n\t\t\treturn {\n\t\t\t\tsynth: new Synth(),\n\t\t\t\tinterval: Interval.random(),\n\t\t\t\tintervalList: Interval.names,\n\t\t\t\tanswerShown: false,\n\t\t\t\trootLocked: false,\n\t\t\t\tcurrentExercise: 0,\n\t\t\t\tselectedIntervals: [],\n\t\t\t\texercises: [\n\t\t\t\t\t'Sing and name the note',\n\t\t\t\t\t'Sing and name the interval',\n\t\t\t\t\t'Sing and name the note and interval',\n\t\t\t\t],\n\t\t\t}\n\t\t},\n\t\tmethods: {\n\t\t\treload() {\n\t\t\t\tthis.interval = Interval.random(\n\t\t\t\t\tthis.rootLocked ? this.interval.notes[0].name : null,\n\t\t\t\t\tthis.selectedIntervals\n\t\t\t\t)\n\t\t\t\tthis.answerShown = false\n\t\t\t},\n\t\t\tplay(index) {\n\t\t\t\tthis.synth.play1second(this.interval.notes[index].frequency())\n\t\t\t},\n\t\t},\n\t\twatch: {\n\t\t\tcurrentExercise() {\n\t\t\t\tthis.reload()\n\t\t\t},\n\t\t},\n\t}\n</script>\n","<template>\n\t<div>\n\t\t<template v-if=\"this.$parent.answerShown\">\n\t\t\t<slot></slot>\n\t\t</template>\n\t\t<button v-else @click=\"this.$parent.answerShown = true\">show</button>\n\t</div>\n</template>\n\n<script>\n\texport default {\n\t\tname: 'toggle-answer',\n\t}\n</script>\n","import { render } from \"./Toggle-answer.vue?vue&type=template&id=681d54da\"\nimport script from \"./Toggle-answer.vue?vue&type=script&lang=js\"\nexport * from \"./Toggle-answer.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/home/runner/work/rcm/rcm/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<details>\n\t\t<summary>\n\t\t\tChange {{ name }}\n\t\t\t<input type=\"text\" v-model=\"selectedItemsValue\" />\n\t\t</summary>\n\t\t<div id=\"input-selection\">\n\t\t\t<span @click=\"selectedItems = []\">all</span>\n\t\t\t<span v-for=\"(item, index) in items\" :key=\"index\">\n\t\t\t\t<input type=\"checkbox\" :id=\"index\" :value=\"index\" v-model=\"selectedItems\" />\n\t\t\t\t<label :for=\"index\">{{ item }}</label>\n\t\t\t</span>\n\t\t</div>\n\t</details>\n</template>\n\n<style lang=\"stylus\" scoped>\n\n\tdetails\n\t\tsummary\n\t\t\tfont-size 1.5em\n\t\t#input-selection\n\t\t\tdisplay flex\n\t\t\tjustify-content space-between\n\t\t\tflex-wrap wrap\n\t\t\tfont-size 2em\n\n\t\t\tspan\n\t\t\t\tuser-select none\n\t\t\t\tmargin 0 0.5em 1em 0.5em\n\n\t\t\t\t&,\n\t\t\t\tlabel\n\t\t\t\t\tcursor pointer\n\t\t\t\t\t&:hover\n\t\t\t\t\t\t\ttext-decoration underline\n\n\t\t\t\tinput\n\t\t\t\t\tdisplay none\n\t\t\t\t\t&:checked ~ label\n\t\t\t\t\t\tcolor white\n\t\t\t\t\t\tbackground-color black\n</style>\n\n<script>\n\texport default {\n\t\tname: 'item-selector',\n\t\tprops: ['name', 'items', 'modelValue'],\n\t\temits: ['update:modelValue'],\n\t\tdata: function () {\n\t\t\treturn {\n\t\t\t\tselectedItems: [],\n\t\t\t}\n\t\t},\n\t\tcomputed: {\n\t\t\tselectedItemsValue: {\n\t\t\t\tget() {\n\t\t\t\t\t// Add each found selected items index in a single binary number.\n\t\t\t\t\tconst value = this.selectedItems\n\t\t\t\t\t\t.slice(0) // make a copy\n\t\t\t\t\t\t.sort((a, b) => a < b)\n\t\t\t\t\t\t.reduce((a, b) => a + (1 << b), 0)\n\t\t\t\t\treturn value.toString(24)\n\t\t\t\t},\n\t\t\t\tset(value) {\n\t\t\t\t\tthis.selectedItems = []\n\n\t\t\t\t\tif (!value) return\n\n\t\t\t\t\t// Convert to a binary string\n\t\t\t\t\tconst selection = parseInt(value, 24).toString(2).split('').reverse()\n\n\t\t\t\t\tfor (var i in selection) {\n\t\t\t\t\t\tif (selection[i] === '1') {\n\t\t\t\t\t\t\tthis.selectedItems.push(i)\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\twatch: {\n\t\t\tselectedItems(n, o) {\n\t\t\t\tif (n !== o) this.$emit('update:modelValue', n)\n\t\t\t},\n\t\t},\n\t}\n</script>\n","import { render } from \"./Item-selector.vue?vue&type=template&id=7b2b656a&scoped=true\"\nimport script from \"./Item-selector.vue?vue&type=script&lang=js\"\nexport * from \"./Item-selector.vue?vue&type=script&lang=js\"\n\nimport \"./Item-selector.vue?vue&type=style&index=0&id=7b2b656a&lang=stylus&scoped=true\"\n\nimport exportComponent from \"/home/runner/work/rcm/rcm/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-7b2b656a\"]])\n\nexport default __exports__","import { render } from \"./Interval.vue?vue&type=template&id=ba1f19f6\"\nimport script from \"./Interval.vue?vue&type=script&lang=js\"\nexport * from \"./Interval.vue?vue&type=script&lang=js\"\n\nimport \"./Interval.vue?vue&type=style&index=0&id=ba1f19f6&lang=stylus\"\n\nimport exportComponent from \"/home/runner/work/rcm/rcm/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<div class=\"exercise\">\n\t\t<h1>Scale Exercises</h1>\n\n\t\t<div class=\"exercise-selection\">\n\t\t\t<details>\n\t\t\t\t<summary>{{ exercises[currentExercise] }}</summary>\n\t\t\t\t<ul>\n\t\t\t\t\t<li\n\t\t\t\t\t\tv-for=\"(exercise, index) in exercises\"\n\t\t\t\t\t\t@click=\"currentExercise = index\"\n\t\t\t\t\t\t:key=\"index\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{{ exercise }}\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t</details>\n\t\t</div>\n\n\t\t<table>\n\t\t\t<tr>\n\t\t\t\t<th>Scale</th>\n\t\t\t\t<th>Root</th>\n\t\t\t\t<td><button @click=\"reload()\">reload</button></td>\n\t\t\t</tr>\n\n\t\t\t<template v-if=\"currentExercise == 0\">\n\t\t\t\t<tr>\n\t\t\t\t\t<td id=\"scale\">\n\t\t\t\t\t\t<toggle-answer>\n\t\t\t\t\t\t\t{{ scale.name.toString() }}\n\t\t\t\t\t\t</toggle-answer>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td id=\"root\">\n\t\t\t\t\t\t{{ scale.notes[0].toString() }}\n\t\t\t\t\t\t<span @click=\"rootLocked = !rootLocked\">\n\t\t\t\t\t\t\t<template v-if=\"rootLocked\"> &#x1f512; </template>\n\t\t\t\t\t\t\t<template v-else> &#x1f513; </template>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td><button @click=\"play(0)\">play</button></td>\n\t\t\t\t</tr>\n\n\t\t\t\t<tr>\n\t\t\t\t\t<th>Notes</th>\n\t\t\t\t\t<td id=\"scale\">{{ scale.notes.join(' ') }}</td>\n\t\t\t\t\t<td><button @click=\"play()\">play</button></td>\n\t\t\t\t</tr>\n\t\t\t</template>\n\n\t\t\t<template v-if=\"currentExercise == 1\">\n\t\t\t\t<tr>\n\t\t\t\t\t<td id=\"scale\">\n\t\t\t\t\t\t{{ scale.name.toString() }}\n\t\t\t\t\t</td>\n\t\t\t\t\t<td id=\"root\">\n\t\t\t\t\t\t{{ scale.notes[0].toString() }}\n\t\t\t\t\t\t<span @click=\"rootLocked = !rootLocked\">\n\t\t\t\t\t\t\t<template v-if=\"rootLocked\"> &#x1f512; </template>\n\t\t\t\t\t\t\t<template v-else> &#x1f513; </template>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td><button @click=\"play(0)\">play</button></td>\n\t\t\t\t</tr>\n\n\t\t\t\t<tr>\n\t\t\t\t\t<th>Notes</th>\n\t\t\t\t\t<td id=\"scale\">\n\t\t\t\t\t\t<toggle-answer>\n\t\t\t\t\t\t\t{{ scale.notes.join(' ') }}\n\t\t\t\t\t\t</toggle-answer>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td><button @click=\"play()\">play</button></td>\n\t\t\t\t</tr>\n\t\t\t</template>\n\n\t\t\t<template v-if=\"currentExercise == 2\">\n\t\t\t\t<tr>\n\t\t\t\t\t<td id=\"scale\">\n\t\t\t\t\t\t<toggle-answer>\n\t\t\t\t\t\t\t{{ scale.name.toString() }}\n\t\t\t\t\t\t</toggle-answer>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td id=\"root\">\n\t\t\t\t\t\t{{ scale.notes[0].toString() }}\n\t\t\t\t\t\t<span @click=\"rootLocked = !rootLocked\">\n\t\t\t\t\t\t\t<template v-if=\"rootLocked\"> &#x1f512; </template>\n\t\t\t\t\t\t\t<template v-else> &#x1f513; </template>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td><button @click=\"play(0)\">play</button></td>\n\t\t\t\t</tr>\n\n\t\t\t\t<tr>\n\t\t\t\t\t<th>Notes</th>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<toggle-answer>\n\t\t\t\t\t\t\t{{ scale.notes.join(' ') }}\n\t\t\t\t\t\t</toggle-answer>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td><button @click=\"play()\">play</button></td>\n\t\t\t\t</tr>\n\t\t\t</template>\n\t\t</table>\n\n\t\t<item-selector name=\"scale\" :items=\"scaleList\" v-model=\"selectedScales\" />\n\t</div>\n</template>\n\n<script>\n\timport ToggleAnswer from '@/components/Toggle-answer.vue'\n\timport ItemSelector from '@/components/Item-selector.vue'\n\n\timport { Scale } from '@/lib/theory.js'\n\timport { Synth } from '@/lib/synth.js'\n\n\texport default {\n\t\tname: 'Scale',\n\t\tcomponents: {\n\t\t\tToggleAnswer,\n\t\t\tItemSelector,\n\t\t},\n\t\tdata: function () {\n\t\t\treturn {\n\t\t\t\tsynth: new Synth(),\n\t\t\t\tscale: Scale.random(),\n\t\t\t\tscaleList: Scale.allNames,\n\t\t\t\trootLocked: false,\n\t\t\t\tanswerShown: false,\n\t\t\t\texercises: ['Name the scale', 'Sing the scale', 'Name and sing the scale'],\n\t\t\t\tcurrentExercise: 0,\n\t\t\t\tfindScale: true,\n\t\t\t\tselectedScales: [],\n\t\t\t}\n\t\t},\n\t\tmethods: {\n\t\t\treload() {\n\t\t\t\tthis.scale = Scale.random(\n\t\t\t\t\tthis.rootLocked ? this.scale.notes[0].name : null,\n\t\t\t\t\tthis.selectedScales\n\t\t\t\t)\n\t\t\t\tthis.answerShown = false\n\t\t\t},\n\t\t\tplay(index) {\n\t\t\t\tif (!index && index !== 0) {\n\t\t\t\t\tthis.scale.notes.forEach((note, i) => {\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tthis.synth.play1second(note.frequency())\n\t\t\t\t\t\t}, i * 700)\n\t\t\t\t\t})\n\t\t\t\t} else {\n\t\t\t\t\tthis.synth.play1second(this.scale.notes[index].frequency())\n\t\t\t\t}\n\t\t\t},\n\t\t},\n\t\twatch: {\n\t\t\tcurrentExercise() {\n\t\t\t\tthis.reload()\n\t\t\t},\n\t\t},\n\t}\n</script>\n","import { render } from \"./Scale.vue?vue&type=template&id=ff669356\"\nimport script from \"./Scale.vue?vue&type=script&lang=js\"\nexport * from \"./Scale.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/home/runner/work/rcm/rcm/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<div class=\"exercise\">\n\t\t<template :key=\"c\" v-for=\"c in chords\">\n\t\t\t<div>{{ c.toString() }}</div>\n\t\t\t<guitar-position :chords=\"c.toGuitarPosition()\" />\n\t\t\t<hr />\n\t\t</template>\n\n\t\t<h1>Chord Exercises</h1>\n\n\t\t<div class=\"exercise-selection\">\n\t\t\t<details>\n\t\t\t\t<summary>{{ exercises[currentExercise] }}</summary>\n\t\t\t\t<ul>\n\t\t\t\t\t<li\n\t\t\t\t\t\tv-for=\"(exercise, index) in exercises\"\n\t\t\t\t\t\t@click=\"currentExercise = index\"\n\t\t\t\t\t\t:key=\"index\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{{ exercise }}\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t</details>\n\t\t</div>\n\n\t\t<table v-if=\"currentExercise === 0\">\n\t\t\t<tr>\n\t\t\t\t<th>Chord</th>\n\t\t\t\t<th>Notes</th>\n\t\t\t\t<td><button @click=\"reload()\">reload</button></td>\n\t\t\t</tr>\n\n\t\t\t<tr>\n\t\t\t\t<td>\n\t\t\t\t\t{{ chord.notes[0].toString() }}\n\t\t\t\t\t<span class=\"lockRoot\" @click=\"rootLocked = !rootLocked\">\n\t\t\t\t\t\t{{ rootLocked ? '&#x1f512;' : '&#x1f513;' }}\n\t\t\t\t\t</span>\n\t\t\t\t</td>\n\t\t\t\t<td>{{ chord.name }}</td>\n\t\t\t\t<td><button @click=\"play(false)\">play</button></td>\n\t\t\t</tr>\n\n\t\t\t<tr>\n\t\t\t\t<td colspan=\"2\">\n\t\t\t\t\t<toggle-answer>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t{{ chord.notes.join('  ').toString() }}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<guitar-position :chords=\"chord.toGuitarPosition()\" />\n\t\t\t\t\t</toggle-answer>\n\t\t\t\t</td>\n\t\t\t\t<td><button @click=\"play(true)\">play</button></td>\n\t\t\t</tr>\n\t\t</table>\n\n\t\t<table v-if=\"currentExercise === 1\">\n\t\t\t<tr>\n\t\t\t\t<th>Chord</th>\n\t\t\t\t<th>Notes</th>\n\t\t\t\t<td><button @click=\"reload()\">reload</button></td>\n\t\t\t</tr>\n\n\t\t\t<tr>\n\t\t\t\t<td>\n\t\t\t\t\t{{ chord.notes[0].toString() }}\n\t\t\t\t\t<span class=\"lockRoot\" @click=\"rootLocked = !rootLocked\">\n\t\t\t\t\t\t{{ rootLocked ? '&#x1f512;' : '&#x1f513;' }}\n\t\t\t\t\t</span>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<toggle-answer>\n\t\t\t\t\t\t{{ chord.name }}\n\t\t\t\t\t</toggle-answer>\n\t\t\t\t</td>\n\t\t\t\t<td><button @click=\"play(false)\">play</button></td>\n\t\t\t</tr>\n\n\t\t\t<tr>\n\t\t\t\t<td colspan=\"2\">\n\t\t\t\t\t<div>\n\t\t\t\t\t\t{{ chord.notes.join('  ').toString() }}\n\t\t\t\t\t</div>\n\t\t\t\t\t<toggle-answer>\n\t\t\t\t\t\t<guitar-position :chords=\"chord.toGuitarPosition()\" />\n\t\t\t\t\t</toggle-answer>\n\t\t\t\t</td>\n\t\t\t\t<td><button @click=\"play(true)\">play</button></td>\n\t\t\t</tr>\n\t\t</table>\n\t</div>\n</template>\n\n<style lang=\"stylus\" scoped>\n\t@import '~@/styles/exercises'\n\t.guitar-position\n\t\tfont-size 0.3em\n</style>\n\n<script>\n\timport ToggleAnswer from '@/components/Toggle-answer.vue'\n\timport GuitarPosition from '@/components/Guitar-position.vue'\n\n\timport { Synth } from '@/lib/synth.js'\n\timport { Chord } from '@/lib/theory.js'\n\n\texport default {\n\t\tname: 'Chord',\n\t\tcomponents: {\n\t\t\tToggleAnswer,\n\t\t\tGuitarPosition,\n\t\t},\n\t\tdata: function () {\n\t\t\treturn {\n\t\t\t\tsynth: new Synth(),\n\t\t\t\trootLocked: false,\n\t\t\t\tanswerShown: false,\n\t\t\t\texercises: ['Play the chord', 'Name the chord'],\n\t\t\t\tcurrentExercise: 0,\n\t\t\t\tchord: Chord.random(),\n\t\t\t\tchords: Chord.allMod(),\n\t\t\t}\n\t\t},\n\t\tmethods: {\n\t\t\treload() {\n\t\t\t\tthis.chord = Chord.random(this.rootLocked ? this.chord.notes[0].name : null)\n\t\t\t\tthis.answerShown = false\n\t\t\t},\n\t\t\tplay(separate) {\n\t\t\t\tthis.chord.notes.forEach((note, i) => {\n\t\t\t\t\tsetTimeout(\n\t\t\t\t\t\t() => {\n\t\t\t\t\t\t\tthis.synth.play1second(note.frequency())\n\t\t\t\t\t\t},\n\t\t\t\t\t\tseparate ? 700 * i : 0\n\t\t\t\t\t)\n\t\t\t\t})\n\t\t\t},\n\t\t},\n\t\twatch: {\n\t\t\tcurrentExercise() {\n\t\t\t\tthis.reload()\n\t\t\t},\n\t\t},\n\t}\n</script>\n","<template>\n\t<div class=\"guitar-position\" v-if=\"chord\">\n\t\t<table>\n\t\t\t<tr\n\t\t\t\tv-for=\"(_, p) in 5\"\n\t\t\t\t:key=\"p\"\n\t\t\t\t:data-p=\"p\"\n\t\t\t\t:data-nut=\"p === 0 && chord.position === 0 ? true : undefined\"\n\t\t\t>\n\t\t\t\t<td\n\t\t\t\t\tv-for=\"(_, s) in 6\"\n\t\t\t\t\t:key=\"s\"\n\t\t\t\t\t:data-open=\"\n\t\t\t\t\t\tp === 0 && chord.position === 0 && chord.strings[s].position === 0\n\t\t\t\t\t\t\t? true\n\t\t\t\t\t\t\t: undefined\n\t\t\t\t\t\"\n\t\t\t\t\t:data-muted=\"p === 0 && chord.strings[s].muted ? true : undefined\"\n\t\t\t\t\t:data-on=\"chord.strings[s].position === p ? true : undefined\"\n\t\t\t\t\t:data-bar=\"\n\t\t\t\t\t\tchord.position >= 0 && chord.strings[s].position === p\n\t\t\t\t\t\t\t? chord.strings[s].bar\n\t\t\t\t\t\t\t: undefined\n\t\t\t\t\t\"\n\t\t\t\t\t:data-position=\"p === 0 && s === 0 ? chord.position : undefined\"\n\t\t\t\t>\n\t\t\t\t\t<span v-if=\"p == 4 && s == 0\" @click=\"current++\">next</span>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t</table>\n\t</div>\n</template>\n\n<style lang=\"stylus\" scoped>\n\tbase-size = 0.5em\n\n\tfloating-after()\n\t\tcontent ''\n\t\tbackground black\n\t\twidth ceil(base-size * 1.5, 4)\n\t\theight ceil(base-size * 1.5, 4)\n\t\tborder-radius base-size * 10\n\t\tposition absolute\n\t\ttop ceil(base-size / 4.5, 4)\n\t\tleft ceil(base-size * 1.25, 4)\n\n\t.guitar-position\n\t\ttable\n\t\t\ttext-align left\n\t\t\tborder-collapse collapse\n\t\t\tmargin 8 * base-size auto 1em\n\t\t\tpadding 0\n\n\t\t\ttr\n\t\t\t\tpadding 0\n\t\t\t\tmargin 0\n\n\t\t\t\t&[data-nut=true]\n\t\t\t\t\t&, td\n\t\t\t\t\t\theight 0\n\n\t\t\t\t\t:not(:first-child)\n\t\t\t\t\t\t border-top ceil(base-size/2, 4) solid black\n\n\t\t\t\ttd\n\t\t\t\t\tposition relative\n\t\t\t\t\tpadding 0\n\t\t\t\t\tmargin 0\n\t\t\t\t\twidth 2 * base-size\n\t\t\t\t\theight 2 * base-size\n\n\t\t\t\t\tspan\n\t\t\t\t\t\tfont-size 0.4em\n\t\t\t\t\t\tcursor pointer\n\n\t\t\t\t\t&:not(:first-child)\n\t\t\t\t\t\tborder 1px solid black\n\n\t\t\t\t\t&[data-on]\n\t\t\t\t\t\t&:after\n\t\t\t\t\t\t\tfloating-after()\n\n\t\t\t\t\t\tfor num in (2..6)\n\t\t\t\t\t\t\t&[data-bar=\\\"{num}\\\"]\n\t\t\t\t\t\t\t\t&:after\n\t\t\t\t\t\t\t\t\twidth num * ceil(base-size * 1.9, 4)\n\n\t\t\t\t\t&[data-open]:after\n\t\t\t\t\t\tfloating-after()\n\t\t\t\t\t\ttop (- base-size * 2)\n\t\t\t\t\t\tbackground white\n\t\t\t\t\t\tborder 1px solid black\n\n\t\t\t\t\t&[data-muted]:after\n\t\t\t\t\t\tfloating-after()\n\t\t\t\t\t\tcontent 'X'\n\t\t\t\t\t\ttop (- base-size * 2)\n\t\t\t\t\t\tbackground white\n\t\t\t\t\t\ttext-align center\n\n\t\t\t\t\t&[data-position]\n\t\t\t\t\t\tposition relative\n\n\t\t\t\t\t\t&:before\n\t\t\t\t\t\t\tcontent attr(data-position)\n\t\t\t\t\t\t\tposition absolute\n\t\t\t\t\t\t\ttop 0\n\t\t\t\t\t\t\tright base-size *2\n</style>\n\n<script>\n\texport default {\n\t\tname: 'guitar-position',\n\t\tprops: ['chords'],\n\t\tdata: function () {\n\t\t\treturn { current: 0 }\n\t\t},\n\t\tcomputed: {\n\t\t\tchord() {\n\t\t\t\treturn this.chords[this.current % this.chords.length]\n\t\t\t},\n\t\t},\n\t}\n</script>\n","import { render } from \"./Guitar-position.vue?vue&type=template&id=03309f79&scoped=true\"\nimport script from \"./Guitar-position.vue?vue&type=script&lang=js\"\nexport * from \"./Guitar-position.vue?vue&type=script&lang=js\"\n\nimport \"./Guitar-position.vue?vue&type=style&index=0&id=03309f79&lang=stylus&scoped=true\"\n\nimport exportComponent from \"/home/runner/work/rcm/rcm/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-03309f79\"]])\n\nexport default __exports__","import { render } from \"./Chord.vue?vue&type=template&id=2c81a155&scoped=true\"\nimport script from \"./Chord.vue?vue&type=script&lang=js\"\nexport * from \"./Chord.vue?vue&type=script&lang=js\"\n\nimport \"./Chord.vue?vue&type=style&index=0&id=2c81a155&lang=stylus&scoped=true\"\n\nimport exportComponent from \"/home/runner/work/rcm/rcm/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-2c81a155\"]])\n\nexport default __exports__","import { createRouter, createWebHashHistory } from 'vue-router'\n\nimport Rcm from '../views/Rcm.vue'\nimport Interval from '../views/Interval.vue'\nimport Scale from '../views/Scale.vue'\nimport Chord from '../views/Chord.vue'\n\nconst routes = [\n\t{ path: '/rcm', name: 'Rcm', component: Rcm },\n\t{ path: '/interval', name: 'Interval', component: Interval },\n\t{ path: '/scale', name: 'Scale', component: Scale },\n\t{ path: '/chord', name: 'Chord', component: Chord },\n]\n\nconst router = createRouter({\n\thistory: createWebHashHistory(),\n\troutes,\n})\n\nexport default router\n","import { createApp } from 'vue'\nimport App from './App.vue'\nimport router from './router'\n\ncreateApp(App).use(router).mount('#app')\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Guitar-position.vue?vue&type=style&index=0&id=03309f79&lang=stylus&scoped=true\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Chord.vue?vue&type=style&index=0&id=43d9b10a&lang=stylus\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Interval.vue?vue&type=style&index=0&id=ba1f19f6&lang=stylus\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Chord.vue?vue&type=style&index=0&id=2c81a155&lang=stylus&scoped=true\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Item-selector.vue?vue&type=style&index=0&id=7b2b656a&lang=stylus&scoped=true\""],"sourceRoot":""}